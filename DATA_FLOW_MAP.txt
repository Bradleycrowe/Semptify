=================================================================
DATA FLOW MAP - HOW INFORMATION FLOWS BETWEEN FUNCTIONS
=================================================================

VISUALIZATION: Each function shares data with others to make the system smarter and faster

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER ACTIONS                            â”‚
â”‚  (Clicks, Uploads, Adds Events, Asks Questions)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CALENDAR / TIMELINE                          â”‚
â”‚  File: calendar_timeline_routes.py, calendar_api.py            â”‚
â”‚  Stores: Events with dates (move-in, repair, notice)           â”‚
â”‚                                                                 â”‚
â”‚  SHARES WITH:                                                   â”‚
â”‚  â†’ Vault: "What documents match this date?"                     â”‚
â”‚  â†’ Learning: "What does user need to know about this event?"    â”‚
â”‚  â†’ Curiosity: "What should we ask next?"                        â”‚
â”‚  â†’ Intelligence: "What's the risk level?"                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚            â”‚            â”‚            â”‚
           â–¼            â–¼            â–¼            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  VAULT   â”‚  â”‚ LEARNING â”‚  â”‚CURIOSITY â”‚  â”‚INTELLIG. â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

=================================================================
DETAILED FLOW #1: CALENDAR â†’ VAULT (Document Timeline)
=================================================================

CURRENT: User adds calendar event separately from uploading document
PROBLEM: Documents and events aren't connected automatically

ENHANCED WITH DATA SHARING:

1. User adds calendar event: "Repair request - Oct 15"
   calendar_api.py stores: {
     event_id: "evt_001",
     type: "repair_request",
     date: "2025-10-15",
     description: "Broken heater"
   }

2. calendar_vault_bridge.py ACTIVATES:
   â†’ Checks: Does user have documents for this date?
   â†’ If NO: Suggests "Upload photos of the issue"
   â†’ If YES: Auto-links documents to event

3. User uploads photo to vault
   vault_bp.py receives upload, calls bridge:
   bridge.link_to_calendar_event(
     document_id="doc_123",
     event_id="evt_001"
   )

4. RESULT:
   âœ“ Photo automatically tagged with event
   âœ“ Timeline shows document thumbnail
   âœ“ JSON certificate includes event reference
   âœ“ No manual linking needed

SPEED GAIN: 3 steps â†’ 1 step (upload auto-links)
EASIER: User doesn't think about organizing, system does it

=================================================================
DETAILED FLOW #2: VAULT â†’ LEARNING (Smart Education)
=================================================================

CURRENT: User uploads document, learning happens separately
PROBLEM: System doesn't know what user needs to learn

ENHANCED WITH DATA SHARING:

1. User uploads document: "Eviction notice"
   vault_bp.py analyzes:
   - Filename: "30_day_notice.pdf"
   - Content type: PDF
   - OCR text: "You have 30 days to vacate"

2. vault_bp.py SHARES with learning_adapter.py:
   adapter.document_uploaded({
     type: "eviction_notice",
     urgency: "high",
     user_id: "user_123"
   })

3. learning_engine.py RESPONDS:
   â†’ Searches knowledge base
   â†’ Finds: "Eviction defenses", "How to respond"
   â†’ Prioritizes: "You have rights - here's what to do NOW"

4. learning_adapter.py TRIGGERS journey_routes.py:
   â†’ Starts "Eviction Defense Journey"
   â†’ Step 1: "Understand your rights"
   â†’ Step 2: "Check notice legality"
   â†’ Step 3: "Prepare response"

5. RESULT:
   âœ“ User immediately sees relevant education
   âœ“ Journey auto-starts based on their situation
   âœ“ No searching or guessing needed

SPEED GAIN: User finds help in 0 steps (proactive)
EASIER: System knows what they need before they ask

=================================================================
DETAILED FLOW #3: LEARNING â†’ CURIOSITY (Smart Questions)
=================================================================

CURRENT: System asks generic questions
PROBLEM: Questions don't match user's situation

ENHANCED WITH DATA SHARING:

1. User reads learning module: "Security Deposits"
   learning_routes.py tracks:
   - Module: "security_deposit_laws"
   - Time spent: 5 minutes
   - Completed: Yes

2. learning_engine.py SHARES with curiosity_engine.py:
   curiosity.user_learned({
     topic: "security_deposits",
     user_id: "user_123",
     context: "move_out_soon"
   })

3. curiosity_engine.py THINKS:
   â†’ User learned about deposits
   â†’ Are they moving out?
   â†’ Check calendar for move-out date
   â†’ Check vault for move-in inspection photos

4. curiosity_engine.py ASKS:
   "I see you learned about security deposits. 
   Do you have your move-in inspection report?
   You'll need it to compare with move-out condition."

5. IF user says NO:
   â†’ Suggests: "Create a move-out inspection checklist now"
   â†’ Adds calendar event: "Final walkthrough"
   â†’ Prepares vault folder: "Move-out evidence"

6. RESULT:
   âœ“ Question is perfectly timed and relevant
   âœ“ System anticipates user's next need
   âœ“ Proactive help, not reactive

SPEED GAIN: User doesn't have to think "what's next?"
EASIER: System guides them through the process

=================================================================
DETAILED FLOW #4: ALL SYSTEMS â†’ INTELLIGENCE (Risk Assessment)
=================================================================

CURRENT: User has to figure out urgency themselves
PROBLEM: Legal situations are complex, deadlines are critical

ENHANCED WITH DATA SHARING:

1. CALENDAR shares: "Notice received - 30 days"
2. VAULT shares: "Eviction notice uploaded"
3. LEARNING shares: "User hasn't read eviction defense yet"
4. CURIOSITY shares: "User hasn't answered questions about lease"

5. intelligence_engine.py ANALYZES:
   risk_level = calculate_risk({
     notice_type: "eviction",
     days_remaining: 30,
     user_knowledge: "low",
     documents_ready: "no",
     legal_area: "mn_eviction_law"
   })
   
   RESULT: risk_level = "HIGH - URGENT ACTION NEEDED"

6. intelligence_engine.py COORDINATES:
   â†’ Tells calendar: "Highlight deadline in RED"
   â†’ Tells learning: "Push urgent modules to top"
   â†’ Tells curiosity: "Ask critical questions first"
   â†’ Tells journey: "Fast-track eviction defense path"

7. USER SEES:
   ğŸš¨ Dashboard: "URGENT: 30 days to respond"
   ğŸ“š "Start here: How to fight eviction"
   âœ… "First step: Review your lease"
   ğŸ“… "Deadline: Dec 15 - File response"

SPEED GAIN: System prioritizes everything automatically
EASIER: User knows exactly what to do first

=================================================================
DETAILED FLOW #5: CURIOSITY â†’ CALENDAR (Proactive Events)
=================================================================

CURRENT: User has to remember to add important dates
PROBLEM: Miss deadlines = lose rights

ENHANCED WITH DATA SHARING:

1. curiosity_engine.py detects pattern:
   - User uploaded eviction notice (30 day)
   - Notice dated: Nov 15
   - User hasn't added court date

2. curiosity_engine.py CALCULATES:
   - 30 days from Nov 15 = Dec 15
   - Need to file response 5 days before = Dec 10
   - Court hearing likely = Dec 20

3. curiosity_engine.py SHARES with calendar_api.py:
   calendar.suggest_events([
     {
       title: "DEADLINE: File eviction response",
       date: "2025-12-10",
       type: "legal_deadline",
       priority: "critical"
     },
     {
       title: "Estimated court hearing",
       date: "2025-12-20",
       type: "court_date",
       priority: "high"
     }
   ])

4. USER SEES:
   "I noticed you have 30 days to respond. I've added these dates to your calendar:"
   [Dec 10 - DEADLINE]  [Dec 20 - Court]
   "Does this look right? I can adjust if needed."

5. RESULT:
   âœ“ Critical deadlines auto-added
   âœ“ User doesn't have to calculate
   âœ“ System prevents missed deadlines

SPEED GAIN: 0 manual calendar work needed
EASIER: System does the legal math for them

=================================================================
FLOW MAP SUMMARY - SHARED DATA MAKES EVERYTHING FASTER
=================================================================

INFORMATION SHARED:              BENEFIT:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Calendar â†’ Vault                 Auto-link documents to timeline
Calendar â†’ Learning              Context-aware education  
Calendar â†’ Intelligence          Risk assessment with dates
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Vault â†’ Calendar                 Suggest events from uploads
Vault â†’ Learning                 Proactive education
Vault â†’ Intelligence             Document-based risk scoring
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Learning â†’ Curiosity             Smart follow-up questions
Learning â†’ Journey               Auto-start relevant paths
Learning â†’ Intelligence          Knowledge-based prioritization
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Curiosity â†’ Calendar             Proactive deadline tracking
Curiosity â†’ Vault                Suggest missing documents
Curiosity â†’ Learning             Request specific education
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Intelligence â†’ ALL               Coordinate priority & urgency
Journey â†’ ALL                    Guide user through complex paths
Storage â†’ ALL                    User identity without passwords
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

=================================================================
TECHNICAL: HOW DATA IS SHARED (FILES TO CONNECT)
=================================================================

METHOD 1: Bridge Files (already exist, just strengthen)
- calendar_vault_bridge.py: bidirectional sync
- curiosity_reasoning_bridge.py: question generation
- Add: learning_curiosity_bridge.py (new)
- Add: intelligence_coordinator.py (new)

METHOD 2: Event System (new)
- Every action emits event: "document_uploaded", "event_added"
- All engines subscribe to events they care about
- Loose coupling = easy to add new features

METHOD 3: Shared Context (new)
- User session stores: current_event, recent_uploads, active_journey
- All routes access same context
- Real-time coordination

=================================================================
SPEED & EASE COMPARISON
=================================================================

WITHOUT DATA SHARING (CURRENT):
1. Add calendar event (manual)
2. Upload document (manual)  
3. Link document to event (manual)
4. Search for learning material (manual)
5. Figure out what to do next (manual)
6. Remember deadlines (manual)
TOTAL: 6 manual steps, user does all the thinking

WITH DATA SHARING (ENHANCED):
1. Upload document
   â†’ System auto-adds calendar event
   â†’ System auto-suggests learning
   â†’ System auto-calculates deadlines  
   â†’ System auto-asks next question
   â†’ System auto-tracks progress
TOTAL: 1 action, system does all the thinking

SPEED: 6x faster
EASE: 95% less cognitive load

=================================================================
NEXT: SHOULD I IMPLEMENT THIS?
=================================================================

I can start connecting these systems phase by phase.
Which flow do you want to see working first?

1. Calendar â†” Vault (document timeline)
2. Vault â†’ Learning (smart education)
3. Curiosity everywhere (smart questions)
4. Intelligence coordinator (risk assessment)
5. All of them together

