# Render Deployment Checklist - Semptify Storage OAuth
# Generated: 2025-11-18 18:51:49

## 1. Render Environment Variables
Set these in your Render Dashboard > Environment:

`
FLASK_SECRET_KEY=<generate-a-secure-random-string>
GOOGLE_CLIENT_ID=<from-google-console>
GOOGLE_CLIENT_SECRET=<from-google-console>
DROPBOX_APP_KEY=<from-dropbox-console>
DROPBOX_APP_SECRET=<from-dropbox-console>
FORCE_HTTPS=1
SECURITY_MODE=open
`

Generate FLASK_SECRET_KEY with:
python -c "import secrets; print(secrets.token_hex(32))"

## 2. Google Cloud Console OAuth Setup
URL: https://console.cloud.google.com/apis/credentials

1. Create OAuth 2.0 Client ID (Web application)
2. Add Authorized Redirect URI:
   https://your-app.onrender.com/oauth/google/callback
3. Enable Google Drive API
4. Publish OAuth consent screen OR add test users

## 3. Dropbox App Console Setup
URL: https://www.dropbox.com/developers/apps

1. Create app with "Scoped access" and "App folder"
2. Note: Using NoRedirect flow - no redirect URI needed
3. Copy App key and App secret to Render env vars

## 4. Deployment Flow
- Push to branch connected to Render (DONE ✓)
- Render auto-deploys from clean-deploy branch
- Monitor build logs for blueprint registration
- Check /readyz endpoint for health

## 5. Human Validation Steps
a) Visit https://your-app.onrender.com/setup
b) Click "Google Drive" (verify warning banner shows)
c) Complete OAuth consent
d) Land on /welcome (verify token display + warning)
e) Save your token somewhere safe
f) Visit /dashboard or vault with ?user_token=<your-token>

## 6. Post-Deployment
- Test Dropbox flow same way
- Switch SECURITY_MODE=enforced after validation
- Remove test users from OAuth consent if using production

## Current Status
✓ Code pushed to clean-deploy branch
✓ Dynamic HTTPS-aware redirects implemented
✓ Idempotent Drive folder/file operations
✓ Human-facing warnings on setup + welcome pages
✓ Storage provider passed to welcome template
○ Render env vars need configuration
○ OAuth redirect URIs need registration
○ Human flow validation pending
