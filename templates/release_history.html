<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Release History</title>
  </head>
  <body>
    <h1>Release History</h1>

    <p>
      <a href="/admin">Back to Admin</a>
      {% if session.admin_logged_in or (current_user and current_user.is_authenticated) %}
        | <a href="/logout">Logout</a>
      {% endif %}
      | <a href="/release_log_raw">Download JSON</a>
    </p>

    <table border="1" cellpadding="6" cellspacing="0">
      <thead>
        <tr><th>Tag</th><th>SHA</th><th>Timestamp</th></tr>
      </thead>
      <tbody>
      {% for r in data %}
        <tr>
          <td><a href="https://github.com/{{ (r.get('repo_owner') or request.environ.get('GITHUB_OWNER') or 'Bradleycrowe') }}/{{ (r.get('repo') or request.environ.get('GITHUB_REPO') or 'SemptifyGUI') }}/releases/tag/{{ r.tag }}">{{ r.tag }}</a></td>
          <td><code>{{ r.sha }}</code></td>
          <td>{{ r.timestamp }}</td>
        </tr>
      {% else %}
        <tr><td colspan="3">No releases recorded yet.</td></tr>
      {% endfor %}
      </tbody>
    </table>
  </body>
</html>
