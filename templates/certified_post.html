{% extends "shell.html" %}

{% block title %}Certified Post / Electronic Service{% endblock %}

{% block content %}
<div class="card narrow">
  <h1>Certified Post / Electronic Service</h1>
  <div class="legal-disclaimer-banner"><strong>Not Legal Advice</strong> This tool helps you record sending a document via postal/courier/electronic service. For legal advice, consult a licensed attorney.</div>
  <p class="muted">Record that you sent a document via a trackable service (postal, courier, or electronic).</p>
  <form action="/certified_post" method="post" enctype="multipart/form-data">
    <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
    <input type="hidden" name="user_token" value="{{ request.args.get('user_token','') }}">
    <p>
      <label>Service Type
        <select name="service_type" required>
          <option value="">Select...</option>
          <option value="postal_certified">Postal - Certified/Registered</option>
          <option value="courier">Courier</option>
          <option value="electronic">Electronic (email/platform)</option>
        </select>
      </label>
    </p>
    <p>
      <label>Destination (name or address)
        <input type="text" name="destination" required>
      </label>
    </p>
    <p>
      <label>Tracking Number
        <input type="text" name="tracking_number" placeholder="optional">
      </label>
    </p>
    <p>
      <label>Related Vault File
        <select name="filename">
          <option value="">(none)</option>
          {% for f in files %}
          <option value="{{ f.name }}">{{ f.name }} ({{ f.size }} bytes)</option>
          {% endfor %}
        </select>
      </label>
    </p>
    <p>
      <label>Receipt image/pdf
        <input type="file" name="receipt_file" title="Upload receipt (optional)">
      </label>
    </p>
    <details>
      <summary>Optional: evidence context</summary>
      <p><label>Timestamp <input type="text" name="evidence_timestamp" placeholder="auto if blank"></label></p>
      <p><label>Location <input type="text" name="evidence_location" placeholder="city, area, etc"></label></p>
      <p><label>User Agent <input type="text" name="evidence_user_agent" placeholder="auto if blank"></label></p>
    </details>
    <button type="submit">Save Record</button>
  </form>
  <p><a href="/vault?user_token={{ request.args.get('user_token','') }}">Back to Vault</a></p>
</div>
{% include '_footer.html' %}
{% endblock %}

{% block scripts %}
<script src="/static/js/help-panel.js"></script>
{% endblock %}
