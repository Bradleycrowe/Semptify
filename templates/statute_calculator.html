<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Statute Calculator - Legal Deadlines</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 36px;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 18px;
            opacity: 0.9;
        }

        .calculator-section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.5);
        }

        .btn {
            display: inline-block;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            text-align: center;
        }

        .btn-primary {
            background: #4CAF50;
            color: white;
        }

        .btn-primary:hover {
            background: #45a049;
            transform: translateY(-2px);
        }

        .results-section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            margin-top: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .deadline-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 4px solid #4CAF50;
        }

        .deadline-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .deadline-date {
            font-size: 24px;
            font-weight: 700;
            color: #4CAF50;
            margin-bottom: 5px;
        }

        .deadline-description {
            color: #ccc;
            line-height: 1.5;
        }

        .warning {
            background: rgba(255, 152, 0, 0.2);
            border-left-color: #ff9800;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
        }

        .warning .deadline-title {
            color: #ff9800;
        }

        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 768px) {
            .grid {
                grid-template-columns: 1fr;
            }
        }

        .statute-info {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .statute-info h3 {
            color: #4CAF50;
            margin-bottom: 10px;
        }

        .statute-info p {
            color: #ddd;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    {% include "includes/navbar.html" %}

    <div class="container">
        <div class="header">
            <h1>‚è±Ô∏è Statute Calculator</h1>
            <p>Calculate important legal deadlines for your tenant rights case</p>
        </div>

        <div class="calculator-section">
            <h2 style="margin-bottom: 20px; font-size: 24px;">Calculate Deadlines</h2>

            <div class="grid">
                <div class="form-group">
                    <label for="state">State:</label>
                    <select id="state" required>
                        <option value="">Select your state...</option>
                        <option value="MN">Minnesota</option>
                        <option value="CA">California</option>
                        <option value="NY">New York</option>
                        <option value="TX">Texas</option>
                        <option value="FL">Florida</option>
                        <option value="IL">Illinois</option>
                        <option value="PA">Pennsylvania</option>
                        <option value="OH">Ohio</option>
                        <option value="GA">Georgia</option>
                        <option value="NC">North Carolina</option>
                        <option value="MI">Michigan</option>
                        <option value="NJ">New Jersey</option>
                        <option value="VA">Virginia</option>
                        <option value="WA">Washington</option>
                        <option value="AZ">Arizona</option>
                        <option value="MA">Massachusetts</option>
                        <option value="TN">Tennessee</option>
                        <option value="IN">Indiana</option>
                        <option value="MO">Missouri</option>
                        <option value="MD">Maryland</option>
                        <option value="WI">Wisconsin</option>
                        <option value="CO">Colorado</option>
                        <option value="AL">Alabama</option>
                        <option value="SC">South Carolina</option>
                        <option value="LA">Louisiana</option>
                        <option value="KY">Kentucky</option>
                        <option value="OR">Oregon</option>
                        <option value="OK">Oklahoma</option>
                        <option value="CT">Connecticut</option>
                        <option value="UT">Utah</option>
                        <option value="IA">Iowa</option>
                        <option value="NV">Nevada</option>
                        <option value="AR">Arkansas</option>
                        <option value="MS">Mississippi</option>
                        <option value="KS">Kansas</option>
                        <option value="NM">New Mexico</option>
                        <option value="NE">Nebraska</option>
                        <option value="WV">West Virginia</option>
                        <option value="ID">Idaho</option>
                        <option value="HI">Hawaii</option>
                        <option value="NH">New Hampshire</option>
                        <option value="ME">Maine</option>
                        <option value="RI">Rhode Island</option>
                        <option value="MT">Montana</option>
                        <option value="DE">Delaware</option>
                        <option value="SD">South Dakota</option>
                        <option value="ND">North Dakota</option>
                        <option value="AK">Alaska</option>
                        <option value="VT">Vermont</option>
                        <option value="WY">Wyoming</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="issue-type">Issue Type:</label>
                    <select id="issue-type" required>
                        <option value="">Select issue type...</option>
                        <option value="eviction">Eviction</option>
                        <option value="rent-increase">Rent Increase</option>
                        <option value="habitability">Habitability Issues</option>
                        <option value="retaliation">Retaliatory Actions</option>
                        <option value="discrimination">Housing Discrimination</option>
                        <option value="deposit">Security Deposit</option>
                        <option value="maintenance">Maintenance Issues</option>
                        <option value="lease-violation">Lease Violations</option>
                        <option value="other">Other</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="start-date">Start Date (when issue occurred):</label>
                    <input type="date" id="start-date" required>
                </div>

                <div class="form-group">
                    <label for="urgency">Urgency Level:</label>
                    <select id="urgency">
                        <option value="normal">Normal</option>
                        <option value="urgent">Urgent (court-ordered eviction)</option>
                        <option value="critical">Critical (homelessness risk)</option>
                    </select>
                </div>
            </div>

            <button class="btn btn-primary" onclick="calculateDeadlines()" style="margin-top: 20px;">Calculate Deadlines</button>
        </div>

        <div class="results-section" id="results" style="display: none;">
            <h2 style="margin-bottom: 20px; font-size: 24px;">Important Deadlines</h2>

            <div class="statute-info">
                <h3>üìã Understanding These Deadlines</h3>
                <p>These calculations are based on general statutes and may vary based on your specific situation. Always consult with a legal professional for your particular case. Deadlines shown in <strong style="color: #ff9800;">orange</strong> are approaching soon.</p>
            </div>

            <div id="deadlines-container">
                <!-- Deadlines will be populated here -->
            </div>
        </div>
    </div>

    <script>
        function calculateDeadlines() {
            const state = document.getElementById('state').value;
            const issueType = document.getElementById('issue-type').value;
            const startDate = document.getElementById('start-date').value;
            const urgency = document.getElementById('urgency').value;

            if (!state || !issueType || !startDate) {
                alert('Please fill in all required fields');
                return;
            }

            const start = new Date(startDate);
            const results = document.getElementById('results');
            const container = document.getElementById('deadlines-container');

            // Calculate deadlines based on state and issue type
            const deadlines = calculateStatuteDeadlines(state, issueType, start, urgency);

            // Clear previous results
            container.innerHTML = '';

            // Add each deadline
            deadlines.forEach(deadline => {
                const deadlineDiv = document.createElement('div');
                deadlineDiv.className = deadline-item ;

                deadlineDiv.innerHTML = 
                    <div class="deadline-title"></div>
                    <div class="deadline-date"></div>
                    <div class="deadline-description"></div>
                ;

                container.appendChild(deadlineDiv);
            });

            results.style.display = 'block';
            results.scrollIntoView({ behavior: 'smooth' });
        }

        function calculateStatuteDeadlines(state, issueType, startDate, urgency) {
            const deadlines = [];
            const today = new Date();

            // Base statute of limitations (varies by state and issue)
            let statuteDays = 365; // 1 year default

            // Adjust based on state
            const stateStatutes = {
                'MN': { 'eviction': 365, 'discrimination': 365, 'contract': 1095 },
                'CA': { 'eviction': 365, 'discrimination': 730, 'contract': 1095 },
                'NY': { 'eviction': 365, 'discrimination': 1095, 'contract': 1095 },
                'TX': { 'eviction': 730, 'discrimination': 730, 'contract': 1095 },
                'FL': { 'eviction': 365, 'discrimination': 1095, 'contract': 1095 }
            };

            if (stateStatutes[state] && stateStatutes[state][issueType]) {
                statuteDays = stateStatutes[state][issueType];
            }

            // Calculate key dates
            const statuteDate = new Date(startDate);
            statuteDate.setDate(statuteDate.getDate() + statuteDays);

            const appealDeadline = new Date(statuteDate);
            appealDeadline.setDate(appealDeadline.getDate() - 30); // 30 days before statute expires

            const responseDeadline = new Date(startDate);
            responseDeadline.setDate(responseDeadline.getDate() + (urgency === 'urgent' ? 3 : urgency === 'critical' ? 1 : 7));

            // Check if deadlines are approaching
            const daysToStatute = Math.ceil((statuteDate - today) / (1000 * 60 * 60 * 24));
            const daysToAppeal = Math.ceil((appealDeadline - today) / (1000 * 60 * 60 * 24));

            deadlines.push({
                title: 'üèõÔ∏è Statute of Limitations',
                date: statuteDate.toLocaleDateString(),
                description: Last day to file your  claim in . This is the absolute deadline - missing it means you lose your right to sue.,
                warning: daysToStatute <= 30
            });

            deadlines.push({
                title: '‚öñÔ∏è Appeal Deadline',
                date: appealDeadline.toLocaleDateString(),
                description: If you lose your case, this is the last day to file an appeal. Prepare your appeal documents before this date.,
                warning: daysToAppeal <= 14
            });

            deadlines.push({
                title: 'üìù Response Deadline',
                date: responseDeadline.toLocaleDateString(),
                description: Initial response deadline for  issues. Contact your landlord/property manager before this date.,
                warning: false
            });

            // Add issue-specific deadlines
            if (issueType === 'eviction') {
                const courtDeadline = new Date(startDate);
                courtDeadline.setDate(courtDeadline.getDate() + (urgency === 'urgent' ? 3 : 14));

                deadlines.push({
                    title: 'üèõÔ∏è Court Hearing Deadline',
                    date: courtDeadline.toLocaleDateString(),
                    description: Deadline to respond to eviction notice in court. Missing this could result in default judgment.,
                    warning: Math.ceil((courtDeadline - today) / (1000 * 60 * 60 * 24)) <= 7
                });
            }

            if (issueType === 'rent-increase') {
                const objectionDeadline = new Date(startDate);
                objectionDeadline.setDate(objectionDeadline.getDate() + 30);

                deadlines.push({
                    title: 'üí∞ Rent Increase Objection',
                    date: objectionDeadline.toLocaleDateString(),
                    description: Deadline to object to unreasonable rent increases. Check local rent control laws.,
                    warning: false
                });
            }

            if (issueType === 'deposit') {
                const depositDeadline = new Date(startDate);
                depositDeadline.setDate(depositDeadline.getDate() + 30);

                deadlines.push({
                    title: 'üíµ Security Deposit Return',
                    date: depositDeadline.toLocaleDateString(),
                    description: Landlord must return your security deposit or provide written explanation for deductions.,
                    warning: false
                });
            }

            return deadlines.sort((a, b) => new Date(a.date) - new Date(b.date));
        }

        // Set default start date to today
        document.getElementById('start-date').valueAsDate = new Date();
    </script>
</body>
</html>
